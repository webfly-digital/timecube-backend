function buyOneClick(event){var btn=event.currentTarget,form=document.getElementById("wf_b1c_form");window.PRODUCT_ID=btn.dataset.pid;if(!window.WFB1CPopup){window.WFB1CPopup=new BX.PopupWindow(btn,window.body,{autoHide:true,closeIcon:true,closeByEsc:true,overlay:{backgroundColor:"gray",opacity:"70"}});WFB1CPopup.setContent(BX(form));form.addEventListener("submit",b1cFormSubmit)}WFB1CPopup.show()}function b1cFormSubmit(e){e.preventDefault();var form=e.target,wait=BX.showWait(form);BX.ajax.runComponentAction("webfly:buyoneclick","buyOneClick",{mode:"class",data:{pid:PRODUCT_ID,name:form.name.value,email:form.email.value,phone:form.phone.value,msg:form.msg.value}}).then(function(response){window.WFB1CPopup.setContent('<div class="wf-popup-header"><p class="wf-popup__title">Успех</p></div>'+'<div class="wf-popup-body"><p>Заказ успешно создан. Ожидайте уведомления.</p></div>');BX.closeWait(form,wait);setTimeout(function(){WFB1CPopup.close()},3500)},function(response){console.log(response);window.WFB1CPopup.setContent('<div class="wf-popup-header"><p class="wf-popup__title">Ошибка</p></div>'+'<div class="wf-popup-body"><p>Попробуйте позже или напишите нам.</p></div>');window.WFB1CPopup.setButtons([okBtn]);BX.closeWait(form,wait)})}