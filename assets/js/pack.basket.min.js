$(function(){var packData={sessid:BX.bitrix_sessid(),productid:undefined,packid:undefined,basketid:undefined};$(document).on("click",".select-pack",function(e){e.preventDefault();packData.productid=e.target.dataset.productid;packData.basketid=e.target.dataset.basketid;var freePack=e.target.dataset.freepack;$.magnificPopup.open({items:{src:"#products-popup"},type:"inline",removalDelay:350,callbacks:{open:function(){var content=this.content;if(typeof content!=="undefined"){if(freePack==="true")content[0].classList.add("free-price");else content[0].classList.remove("free-price")}},afterClose:function(){location.reload()}}})});$(document).on("click",".wf-product-select-pack",function(e){packData.packid=e.target.dataset.productid;if(typeof packData.productid!=="undefined"&&typeof packData.packid!=="undefined")wfSelectProduct(packData)})});function wfSelectProduct(data){if(typeof data.productid==="undefined"||typeof data.packid==="undefined"||typeof data.basketid==="undefined")return false;$.ajax({url:"select.pack.php",method:"post",data:data,success:function(res){if(res.success){$.magnificPopup.close()}},error:function(){}})}